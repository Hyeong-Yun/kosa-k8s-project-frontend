<!DOCTYPE html>
<html>
<head>
  <title>Send JSON Data to API Gateway</title>
  <style>
h1 {
  color: blue;
}
​
.product {
  padding: 10px;
  margin-bottom: 10px;
  background-color: lightgray;
  cursor: pointer;
}
  </style>
​
<script>

let obj = [
    {
        event_time : "",
        event_type: "",
        product_id: 1234,
        category_id : 123456,
        category_code : "Hello World",
        brand : "Hello",
        price : 489.07,
        user_id : 1235467,
        user_session: "fdafdf-123123-5342534"
    },
    {
        event_time : "",
        event_type: "",
        product_id: 234345,
        category_id : 12345675656,
        category_code : "Hello World",
        brand : "Hello",
        price : 500.07,
        user_id : 123140,
        user_session: "dsafadsf-123123-5342534"
    },
    {
        event_time : "",
        event_type: "",
        product_id: 123445713,
        category_id : 452456,
        category_code : "Hello World",
        brand : "Hello",
        price : 200.07,
        user_id : 12034095,
        user_session: "agda-123123-23235423"
    },
]


function sendClickStream(productName) {
  let clickData = {
    timestamp: new Date().toISOString(),
    element: "product",
    action: "click",
    product: productName
  };
​
  // API Gateway 주소
  let apiEndpoint = "https://20dm4stmpk.execute-api.ap-northeast-2.amazonaws.com/PROD/v1";
​
  // JSON 데이터를 서버로 전송하는 fetch 요청
  fetch(apiEndpoint, {
    method: "POST",
    headers: {
      "Content-Type": "application/json"
    },
    body: JSON.stringify(clickData)
  })
    .then(function(response) {
      if (response.ok) {
        console.log("Clickstream data sent successfully!");
      } else {
        console.error("Failed to send clickstream data. Status code: " + response.status);
      }
    })
    .catch(function(error) {
      console.error("Error sending clickstream data:", error);
    });


}
</script>
</head>
<body>
  <h1>Clickstream to API Gateway</h1>
  <div id="productList">
    <div class="product" onclick="sendClickStream(obj[0])">Product 1</div>
    <div class="product" onclick="sendClickStream(obj[1])">Product 2</div>
    <div class="product" onclick="sendClickStream(obj[2])">Product 3</div>
  </div>
​
  <script src="script.js"></script>
</body>
</html>